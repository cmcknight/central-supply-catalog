{% include '_head.njk' %}
{% include '_site-header.njk' %}

<main class="white black-text product-section">

  <div class="product-main container">


    <div class="row product-main-content">

      
      <div class="col s12 m7 push-m2 l8 push-l2 xl9 push-xl1"><h1>{{ product.name }}</h1></div>

      <div class="product-image col s4 m2 pull-m7 l2 pull-l8 xl2 pull-xl9">
        {% if product.image %}
        <img src="{{product.image | url}}" alt="{{product.name}}" class="responsive-img">
        {% else %}
        <img src="{{'/img/products/no-image.png' | url}}" alt="{{product.name}}">
        {% endif %}
      </div>

      <div class="product-controls col s5 offset-s3 m3 l2 push-l1 xl1">
        <div class="right">
        <form>
          <h5 class="right-align">{{ product.cost | costLabel }}</h5>

          <div class="input-field quantity right">
            <input type="number" name="qty" id="qty" min="0" max="999" value="0">
          </div>

          <div class="add-products-btn right">
            <button type="submit" class="btn-small amber black-text" id="add-to-cart">Add</button>
          </div>
        </form>
        </div>
      </div>

    </div> <!-- end of product-main-content row -->

    <div class="divider"></div>
    
    <div class="row product-description">

      <div class="description-content col s12 m9">
        <h5>Product Description</h5>
        {{ product.description | markdown | safe }}
      </div>
    
      <div class="product-details col s12 m3">
        <table>
          <thead>
            <tr>
              <th colspan="2" class="center">Product Details</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><strong>Mfr:</strong></td>
              <td>
                {% getMfr product.mfrId %}
              </td>
            </tr>
            <tr>
              <td><strong>TL:</td>
              <td>{{product.techLevel }}</td>
            </tr>
            <tr>
              <td><strong>Mass:</strong></td>
              <td>{{ product.mass }}</td>
            </tr>
            <tr>
              <td><strong>Size:</strong></td>
              <td>{{ product.size }}</td>
            </tr>
            <tr>
              <td><strong>QREBS:</strong></td>
              <td>{{ product.qrebs }}</td>
            </tr>
          </tbody>
        </table>
      </div>

    </div>

    <div class="row">
      <div class="col s1 blue">1</div>
      <div class="col s1 yellow">2</div>
      <div class="col s1 blue">3</div>
      <div class="col s1 yellow">4</div>
      <div class="col s1 blue">5</div>
      <div class="col s1 yellow">6</div>
      <div class="col s1 blue">7</div>
      <div class="col s1 yellow">8</div>
      <div class="col s1 blue">9</div>
      <div class="col s1 yellow">10</div>
      <div class="col s1 blue">11</div>
      <div class="col s1 yellow">12</div>
    </div>

    <div class="divider"></div>

    {% if product.accessories | length > 0 %}
    <div class="product-accessories">
      <h6>Accessories</h6>
      {% for sku in product.accessories %}
        {% if loop.index > 1 %}
        <div class="divider"></div>
        {% endif %}
        {% getAccessory sku %}
      {% endfor %}
    </div>
    {% endif %}
    <div class="divider"></div>

    <div class="row product-source">
      <h6>Sources</h6>
      {% if product.sources %}
        {% for src in product.sources %}
        <p class="source">
          &ldquo;<em>{{ src.publication | safe }}</em>&rdquo;,
          {% set comma = joiner() %}
          {% for author in src.authors %}
          {{ comma() }}{{ author | safe }}
          {% endfor %}
          , <a href="{{ src.publisher.url | url }}" target="_blank">{{ src.publisher.name }}</a>
        </p>
        {% endfor %}
      {% endif %}
    </div>

  </div> <!-- product main container -->
</main>

{% include '_site-footer.njk' %}
{% include '_foot.njk'%}