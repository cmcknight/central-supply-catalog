{% include '_head.njk' %}
{% include '_site-header.njk' %}

<main class="product-main">
  <div class="container white black-text">

    <div class="row product-header">

      <div class="col s12 m6 push-m3 l7 push-l2 xl8 push-xl2">
        <h1 id="product-name" data-sku="{{product.sku}}">{{ product.name }}</h1>
      </div>

      <div class="product-image col s4 m3 pull-m6 l2 pull-l7 xl2 pull-xl8">
        {% if product.image %}
        <img src="{{product.image | url}}" alt="{{product.name}}" class="responsive-img" id="prod-img">
        {% else %}
        <img src="{{'/img/products/no-image.png' | url}}" alt="{{product.name}}" id="prod-img">
        {% endif %}
      </div>

      <div class="product-controls col s3 offset-s3 m3 l3 xl2 right">
        <div class="right">
          <form>
            <h5 class="right-align" id="unit-price">{{ product.cost | costLabel }}</h5>

            <div class="input-field quantity right valign-wrapper">
              <input type="number" name="qty" id="product-qty" min="0" max="999" value="1">
            </div>
            <p><br></p>
            <div class="add-products-btn right">
              <button type="submit" class="btn-small amber black-text add-to-cart" id="add-to-cart">Add</button>
            </div>
          </form>
        </div>
      </div>

    </div>
    <div class="divider"></div>

    <div class="row product-description">
      <div class="description-content col s12 m9">
        <h5>Product Description</h5>
        {{ product.description | markdown | safe }}
      </div>

      <div class="product-details col s12 m3">
        <table>
          <thead>
            <tr>
              <th colspan="2" class="center">Product Details</th>
            </tr>
          </thead>
          <tbody>
            {% if product.mfrId %}
            <tr>
              <td><strong>Mfr:</strong></td>
              <td>
                {% getMfr product.mfrId %}
              </td>
            </tr>
            {% endif %}
            <tr>
              <td><strong>TL:</td>
              <td>{{product.techLevel }}</td>
            </tr>
            <tr>
              <td><strong>Mass (Kg):</strong></td>
              <td>{{ product.mass }}</td>
            </tr>
            {% if product.size %}
            <tr>
              <td><strong>Size:</strong></td>
              <td>{{ product.size }}</td>
            </tr>
            {% endif %}
            {% if product.qrebs %}
            <tr>
              <td><strong>QREBS:</strong></td>
              <td>{{ product.qrebs }}</td>
            </tr>
            {% endif %}
          </tbody>
        </table>
      </div>

    </div>

    <div class="divider"></div>

    {% if product.accessories | length > 0 %}

    <div class="product-accessories">
      <h6>Accessories</h6>
      {% for sku in product.accessories %}
        {% if loop.index > 1 %}
        <div class="divider"></div>
        {% endif %}
        {% getAccessory sku %}
      {% endfor %}
    </div>
    <div class="divider"></div>
    {% endif %}

    <div class="row product-source">
      <h6>Sources</h6>
      {% if product.sources %}
        {% for src in product.sources %}
        <p class="source">
          &ldquo;<em>{{ src.publication | safe }}</em>&rdquo;,
          {% set comma = joiner() %}
          {% for author in src.authors %}
          {{ comma() }}{{ author | safe }}
          {% endfor %}
          , {% if src.publisher.url == "" %}
            {{ src.publisher.name }}
            {% else %}
            <a href="{{ src.publisher.url | url }}" target="_blank">{{ src.publisher.name }}</a>
            {% endif %}
        </p>
        {% endfor %}
      {% endif %}
    </div>

  </div>


</main>



{% include '_site-footer.njk' %}
{% include '_foot.njk'%}