{% include '_head.njk' %}
{% include '_site-header.njk' %}


<main class="white black-text product-section">

  <div class="product-main container">

    <h1>{{ product.name }}</h1>

    <div class="product-main-content row">

      <div class="product-image col s4 m4 l3">
        {% if product.image %}
        <img src="{{product.image | url}}" alt="{{product.name}}" class="responsive-img">
        {% else %}
        <img src="{{'/img/products/no-image.png' | url}}" alt="{{product.name}}">
        {% endif %}
      </div>

      <div class="product-controls col s5 offset-s3 m3 offset-m5 l2 offset-l">
        <form>
          <h5 class="right-align">{{ product.cost | costLabel }}</h5>

          <div class="input-field quantity right">
            <input type="number" name="qty" id="qty" min="0" max="999" value="0">
          </div>

          <div class="add-products-btn right s6 m3 l3">
            <button type="submit" class="btn-small amber black-text ">Add to Cart</button>
          </div>
        </form>
      </div>
    </div> {# row #}

    <div class="product-description row">
      <div class="description-content col s12 m7 l8 flow-text">
          <h5>Description</h5>
          {{ product.description | markdown | safe }}
      </div>

      <div class="product-details col s12 m5 l4">
        <table>
          <thead>
            <tr>
              <th colspan="2" class="center">Product Details</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><strong>Manufacturer:</strong></td>
              <td>
                {% getMfr product.mfrId %}
              </td>
            </tr>
            <tr>
              <td><strong>TL:</td>
              <td>{{product.techLevel }}</td>
            </tr>
            <tr>
              <td><strong>Mass:</strong></td>
              <td>{{ product.mass }}</td>
            </tr>
            <tr>
              <td><strong>Size:</strong></td>
              <td>{{ product.size }}</td>
            </tr>
            <tr>
              <td><strong>QREBS:</strong></td>
              <td>{{ product.qrebs }}</td>
            </tr>
          </tbody>
        </table>
      </div>
      </div> {# row #}

      {% if product.accessories | length > 0 %}
      <div class="product-accessories row col s12">
        <h6>Accessories</h6>
        <div class="accessory-list white black-text">
          {% set accLength = product.accessories | length %}
          {% if accLength > 0 %}
          {% for sku in product.accessories %}
          {% getAccessory sku %}
          {% endfor %}
          {% endif %}
        </div>
      </div> {# row #}
      {% endif %}

      <div class="product-source row" style="border-top: 1px solid grey !important;">

        <p><strong>Source of Data</strong><br></p>

        {% if product.sources %}
        {% for src in product.sources %}
        <p class="source">
          &ldquo;<em>{{ src.publication | safe}}</em>&rdquo;,
          {% set comma = joiner() %}
          {% for author in src.authors %}
          {{ comma() }}{{author | safe }}
          {% endfor %}
          , <a href="{{ src.publisher.url | url }}" target="_blank">{{ src.publisher.name}}</a>
        </p>
        {% endfor %}
        {% endif %}
      </div> {# source of data row #}

    </div> {# product main container #}
</main> {# product section #}

{% include '_site-footer.njk' %}
{% include '_foot.njk'%}